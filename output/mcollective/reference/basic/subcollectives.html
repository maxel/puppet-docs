<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Documentation | Puppet Labs - Subcollectives</title>
  	<meta name="description" content="The open source leader in data center automation">
  	<link rel="alternate" type="text/xml" title="Puppet Labs RSS 0.92 Feed" href="http://puppetlabs.com/feed/rss/">
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Atom Feed" href="http://puppetlabs.com/feed/atom/">
  	<link rel="alternate" type="application/rss+xml" title="Puppet Labs RSS 2.0 Feed" href="http://puppetlabs.com/feed/">
  	<link rel="pingback" href="http://puppetlabs.com/xmlrpc.php">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://puppetlabs.com/xmlrpc.php?rsd" />
    <link rel='index' title='Puppet Labs' href='http://docs.puppetlabs.com' />

<!-- Google stats -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1537572-5");
pageTracker._setDomainName(".puppetlabs.com");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- End Google stats -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='/files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='/files/javascripts/ampersands.js'></script>

     <!--Add rotation jQuery Script -->
	 	
    <script type='text/javascript' src='/files/javascripts/addRotate.js'></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <link rel="canonical" href="http://docs.puppetlabs.com" />
    <!-- /all in one seo pack -->
	
    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen"> 
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->
  
    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->		

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>



        
  <body id="resources" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>		
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->		

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/puppet/">
              <span>Products</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>            
              <li>
                <ul>
<li class="page_item page-item-769"><a href="http://www.puppetlabs.com/puppet/puppet-enterprise/" title="Puppet Enterprise">Puppet Enterprise</a></li>
<li class="page_item page-item-757"><a href="http://www.puppetlabs.com/puppet/introduction/" title="Puppet">Puppet</a></li>
<li class="page_item page-item-956"><a href="http://www.puppetlabs.com/puppet/how-to-buy/" title="How to Buy">How to Buy</a></li>
<li class="page_item page-item-1159"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>

<li class="page_item page-item-2415"><a href="http://www.puppetlabs.com/mcollective/introduction/" title="MCollective">MCollective</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>

            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://www.puppetlabs.com/services/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-839"><a href="http://www.puppetlabs.com/services/support/" title="Enterprise Support">Enterprise Support</a></li>
<li class="page_item page-item-845"><a href="http://www.puppetlabs.com/services/training-workshops/" title="On-Site Training &amp; Consulting">On-Site Training &amp; Consulting</a></li>
<li class="page_item page-item-849"><a href="/category/events/upcoming/" title="Events &amp; Public Training">Events &amp; Public Training</a></li>
<li class="page_item page-item-851"><a href="http://www.puppetlabs.com/services/partners/" title="Partners">Partners</a></li>
<li class="page_item page-item-1037"><a href="/resources/customer-support" title="Customer Support">Customer Support</a></li>
            </ul>
          </li>
          <li id="resources-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/resources/">
              <span>Resources</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/resources/overview-2/" title="Overview">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/resources/customer-support/" title="Customer Support">Customer Support</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com" title="Documentation">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download" title="Downloads">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com" title="Module Forge">Module Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/request-whitepapers.html" title="White Papers">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki" title="Wiki">Wiki</a></li>
            </ul>

          </li>

<li id="customer-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/customers/companies/">
              <span>Customers</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/customers/companies/" title="Overview">Companies</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/customers/case-studies/" title="Case Studies">Case Studies</a></li>
<li class="page_item page-item-1040"><a href="http://www.puppetlabs.com/customers/product-testimonials/" title="Product Testimonials">Product Testimonials</a></li>
<li class="page_item page-item-872"><a href="http://www.puppetlabs.com/customers/what-customers-are-saying/" title="ervice Testimonials">Service Testimonials</a></li>
	</ul>
          </li>
         <li id="community-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/community/">
              <span>Community</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/community/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/blog" title="Blog">Blog</a></li>
<li class="page_item page-item-2264"><a href="http://www.puppetlabs.com/community/puppet-camp/" title="Puppet Camp">Puppet Camp</a></li>
<li class="page_item page-item-2249"><a href="http://www.puppetlabs.com/community/user-groups-and-devops-groups/" title="User Groups &amp; DevOps Groups">User Groups &amp; DevOps Groups</a></li>
<li class="page_item page-item-2215"><a href="http://www.puppetlabs.com/community/presentations/" title="Presentations">Presentations</a></li>

<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/videos/" title="Videos">Videos</a></li>
<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/badges/" title="Badges">Badges</a></li>
            </ul>
          </li>

          <li id="company-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>

            <ul>
              <li class="page_item page-item-2316"><a href="http://www.puppetlabs.com/company/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://www.puppetlabs.com/company/news/" title="News">News</a></li>
<li class="page_item page-item-1571"><a href="http://www.puppetlabs.com/company/jobs/" title="Jobs">Jobs</a></li>
<li class="page_item page-item-2313"><a href="http://www.puppetlabs.com/company/contact-us/" title="Contact Us">Contact Us</a></li>
            </ul>
          </li>
    		</ul>	   
          <div id="misc-navigation">

			  <ul>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
				<li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/#contact">Contact Us</a></li>
				<li><a href="http://puppetlabs.com/resources/downloads" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">

			  <div>
				<input type="hidden" name="cx" value="017884045025332504017:1mnj-dlgfcc" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>

          </div>
      </nav>
    	</div>
    </header>  

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Subcollectives</span></h1>
          <ul id="doc-navigation">
            <li><a href="/">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
	            <dl>
	              <dt>Puppet Guides</dt>
                      <dd><a href="/index.html">Index</a></dd>
                  <dt>Puppet References</dt>
                      <dd><a href="/references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="/references/latest/function.html">Functions</a></dd>
                      <dd><a href="/references/latest/metaparameter.html">Metaparameters</a></dd>
                      <dd><a href="/references/latest/configuration.html">Configuration</a></dd>
                  <dt>References By Version</dt>
                      <dd><a href="/references/2.6.7/">2.6.7</a></dd>
                      <dd><a href="/references/0.25.5/">0.25.5</a></dd> 
                      <dd><a href="/references/0.24.8/">0.24.8</a></dd>
                      <dd><a href="/references/">Other Versions</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">Index</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">SimpleRPC</a></dd>
                      <dd><a href="/mcollective/roadmap/index.html">Roadmap</a></dd>
                      <dd><a href="/mcollective/releasenotes.html">Release Notes</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
	            </dl>
            </li>
            <li><a href="/contribute.html">Contribute</a></li>
          </ul>
        </div>
      </section>
    
      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              
<h1 id="subcollectives">Subcollectives</h1>

<ul id="markdown-toc">
  <li><a href="#subcollectives">Subcollectives</a></li>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#partitionion-approaches">Partitionion Approaches</a></li>
  <li><a href="#configuring-mcollective">Configuring MCollective</a></li>
  <li><a href="#partitioning-for-security">Partitioning for Security</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#activemq-filters">ActiveMQ Filters</a></li>
</ul>

<h1 id="overview">Overview</h1>

<p>By default all servers are part of a single broadcast domain, if you have an
agent on all machines in your network and you send a message directed to
machines with that agent they will all get it regardless of filters.</p>

<p>This works well for the common use case but can present problems in the
following scenarios:</p>

<ul>
  <li>You have a very big and busy network.  With thousands of machines responding
to requests every 10 seconds very large numbers of messages will be created
and you might want to partition the traffic.</li>
  <li>You have multiple data centers on different continents, the latency and
volume of traffic will be too big.  You&rsquo;d want to duplicate monitoring and
management automations in each datacenter but as it&rsquo;s all one broadcast
domain you still see large amount of traffic on the slow link.</li>
  <li>You can&rsquo;t just run multiple seperate installs because you still wish to
retain the central management feature of MCollective.</li>
  <li>Securing a flat network can be problematic.  SimpleRPC has a security
framework that is aware of users and network topology but the core network
doesnt.</li>
</ul>

<p>In version <em>1.1.3</em> we&rsquo;ve introduced the concept of sub collectives that lets you
define broadcast domains and configure a mcollective server to belong to one or
many of these domains.</p>

<h1 id="partitionion-approaches">Partitionion Approaches</h1>

<p>Determining how to partition your nework can be a very complex subject and
requires an understanding of your message flow, where requestors sit and also
the topology of your middleware clusters.</p>

<p>Most middleware solutions will only send traffic where they know there exist an
interest in this traffic.  Therefore if you had an agent on only 10 of 1000
machines only those 10 machines will receive the associated traffic.  This is an
important distinction to keep in mind.</p>

<p><img src="../../images/subcollectives-multiple-middleware.png" alt="ActiveMQ Cluster" /></p>

<p>We&rsquo;ll be working with a small 52 node collective that you can see above, the
collective has machines in many data centers spread over 4 countries.  There are
3 ActiveMQ servers connected in a mesh.</p>

<p>Along with each ActiveMQ node is also a Puppet Master, Nagios instance and other
shared infrastructure components.</p>

<p>An ideal setup for this network would be:</p>

<ul>
  <li>MCollective NRPE and Puppetd Agent on each of 52 servers</li>
  <li>Puppet Commander on each of the 3 ActiveMQ locations</li>
  <li>Nagios in each of the locations monitoring the machines in its region</li>
  <li>Regional traffic will be isolated and contained to the region as much as
possible</li>
  <li>Systems Administrators and Registration data retain the ability to target the
whole collective</li>
</ul>

<p>The problem with a single flat collective is that each of the 3 Puppet
Commanders will get a copy of all the traffic, even traffic they did not request
they will simply ignore the wrong traffic.  The links between Europe and US will
see a large number of messages traveling over them.  In a small 52 node traffic
this is managable but if each of the 4 locations had thousands of nodes the
situation will rapidly become untenable.</p>

<p>It seems natural then to create a number of broadcast domains - subcollectives:</p>

<ul>
  <li>A global collective that each machines belongs to</li>
  <li>UK, DE, ZA and US collectives that contains just machines in those regions</li>
  <li>An EU collective that has UK, DE and ZA machines</li>
</ul>

<p>Visually this arrangement might look like the diagram below:</p>

<p><img src="../../images/subcollectives-collectives.png" alt="Subcollectives" /></p>

<p>Notice how subcollectives can span broker boundaries - our EU collective has nodes
that would connect to both the UK and DE brokers.</p>

<p>We can now configure our Nagios and Puppet Commanders to communicate only to the
sub collectives and the traffic for these collectives will be contained
regionally.</p>

<p>The graph below shows the impact of doing this, this is the US ActiveMQ instance
showing traffic before partitioning and after.  You can see even on a small
network this can have a big impact.</p>

<p><img src="../../images/subcollectives-impact.png" alt="Subcollectives" /></p>

<h1 id="configuring-mcollective">Configuring MCollective</h1>

<p>Configuring the partitioned collective above is fairly simple.  We&rsquo;ll look at
one of the DE nodes for reference:</p>

<div class="highlight"><pre><code class="ini"><span class="na">topicprefix</span> <span class="o">=</span> <span class="s">/topic/</span>
<span class="na">collectives</span> <span class="o">=</span> <span class="s">mcollective,de_collective,eu_collective</span>
<span class="na">main_collective</span> <span class="o">=</span> <span class="s">mcollective</span>
</code></pre>
</div>

<p>The <em>collectives</em> directive tells the node all the collectives it should belong
to and the <em>main<code>_</code>collective</em> instructs Registration where to direct messages
to.</p>

<h1 id="partitioning-for-security">Partitioning for Security</h1>

<p>Another possible advantage from subcollectives is security.  While the SimpleRPC
framework has a security model that is aware of the topology the core network
layer does not.  Even if you only give someone access to run SimpleRPC requests
against some machines they can still use <em>mc ping</em> to discover other nodes on
your network.</p>

<p>By creating a subcollective of just their nodes and restricting them on the
middleware level to just that collective you can effectively and completely
create a secure isolated zone that overlays your exiting networok.</p>

<h1 id="testing">Testing</h1>

<p>Testing that it works is pretty simple, first we need a <em>client.cfg</em> that
configures your client to talk to all the sub collectives:</p>

<div class="highlight"><pre><code class="ini"><span class="na">topicprefix</span> <span class="o">=</span> <span class="s">/topic/</span>
<span class="na">collectives</span> <span class="o">=</span> <span class="s">mcollective,uk_collective,us_collective,de_collective,eu_collective,us_collective,za_collective</span>
<span class="na">main_collective</span> <span class="o">=</span> <span class="s">mcollective</span>
</code></pre>
</div>

<p>You can now test with <em>mc ping</em>:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> mc ping -T us_collective
<span class="go">host1.us.my.net         time=200.67 ms</span>
<span class="go">host2.us.my.net         time=241.30 ms</span>
<span class="go">host3.us.my.net         time=245.24 ms</span>
<span class="go">host4.us.my.net         time=275.42 ms</span>
<span class="go">host5.us.my.net         time=279.90 ms</span>
<span class="go">host6.us.my.net         time=283.61 ms</span>
<span class="go">host7.us.my.net         time=370.56 ms</span>


<span class="go">---- ping statistics ----</span>
<span class="go">7 replies max: 370.56 min: 200.67 avg: 270.96</span>
</code></pre>
</div>

<p>By specifying other collectives in the -T argument you should see the sub
collectives and if you do not specify anything you should see all machines.</p>

<p>Clients don&rsquo;t need to know about all collectives, only the ones they intend
to communicate with.</p>

<p>You can discover the list of known collectives and how many nodes are in each
using the <em>inventory</em> application:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> mc inventory --list-collectives

<span class="go"> * [ ==================================== ] 52 / 52</span>

<span class="go">   Collective                     Nodes</span>
<span class="go">   ==========                     =====</span>
<span class="go">   za_collective                  2</span>
<span class="go">   us_collective                  7</span>
<span class="go">   uk_collective                  19</span>
<span class="go">   de_collective                  24</span>
<span class="go">   eu_collective                  45</span>
<span class="go">   mcollective                    52</span>

<span class="go">                     Total nodes: 52</span>
</code></pre>
</div>

<h1 id="activemq-filters">ActiveMQ Filters</h1>

<p>The above setup should just work in most cases but you might want to go one step
further and actively prevent propagation across the network of sub collective
traffic.</p>

<p>In your ActiveMQ broker setup you will already have a section defining your
network connections, something like:</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;networkConnectors&gt;</span>
  <span class="nt">&lt;networkConnector</span>
     <span class="na">name=</span><span class="s">&quot;us-uk&quot;</span>
     <span class="na">uri=</span><span class="s">&quot;static:(tcp://stomp1.uk.my.net:6166)&quot;</span>
     <span class="na">userName=</span><span class="s">&quot;amq&quot;</span>
     <span class="na">password=</span><span class="s">&quot;secret&quot;</span>
     <span class="na">duplex=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/networkConnectors&gt;</span>
</code></pre>
</div>

<p>You can add filters here restricting traffic in this case the US&lt;-&gt;UK connection
should never transmit <em>us<code>_</code>collective</em> traffic, so lets restrict that:</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;networkConnectors&gt;</span>
  <span class="nt">&lt;networkConnector</span>
     <span class="err">&lt;excludedDestinations</span><span class="nt">&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">&quot;us_collective.&gt;&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">&quot;uk_collective.&gt;&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">&quot;de_collective.&gt;&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">&quot;za_collective.&gt;&quot;</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">&quot;eu_collective.&gt;&quot;</span> <span class="nt">/&gt;</span>
     <span class="nt">&lt;/excludedDestinations&gt;</span>
     name=&quot;us-uk&quot;
     uri=&quot;static:(tcp://stomp1.uk.my.net:6166)&quot;
     userName=&quot;amq&quot;
     password=&quot;secret&quot;
     duplex=&quot;true&quot; /&gt;
<span class="nt">&lt;/networkConnectors&gt;</span>
</code></pre>
</div>


            </div>
            <div class="secondary-content">
                  <div id="subCol">
                  
                  
                      <h3 class="chapter">Overview</h3>
<ul class="toc">
       <li><a href="/mcollective/">Introduction</a></li>
       <li><a href="/mcollective/screencasts.html">Screencasts</a></li>
       <li><a href="/mcollective/ec2demo.html">EC2 Demo</a></li>
       <li><a href="/mcollective/terminology.html">Terminology</a></li>
       <li><a href="/mcollective/security.html">Security Overview</a></li>
</ul>

<h3 class="chapter">Users</h3>
<ul class="toc">
       <li><a href="/mcollective/reference/basic/gettingstarted.html">Getting
Started</a></li>
       <li><a
href="/mcollective/reference/basic/configuration.html">Configuration
Guide</a></li>
       <li><a href="/mcollective/reference/basic/daemon.html">Controlling
mcollectived</a></li>
       <li><a href="/mcollective/reference/">...more</a></li>
</ul>


<h3 class="chapter">Writing Agents</h3>
<ul class="toc">
       <li><a href="/mcollective/simplerpc/">Overview</a></li>
       <li><a href="/mcollective/simplerpc/agents.html">Writing Agents</a></li>
       <li><a href="/mcollective/simplerpc/clients.html">Writing Clients</a></li>
       <li><a
href="/mcollective/simplerpc/authorization.html">Authorization</a></li>
       <li><a href="/mcollective/simplerpc/auditing.html">Auditing</a></li>
       <li><a href="/mcollective/simplerpc/ddl.html">DDL</a></li>
</ul>

                  
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>  
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>
              
				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">
				
				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>
				
				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />
				
				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />
	
				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />
				
				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>
				
				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>
              
<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>
                
                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>	

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">

					
			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by James Turnbull, <a href="http://apress.com/book/view/1590599780" rel="nofollow">Pulling Strings with Puppet</a> is the first book to introduce the powerful Puppet system administration tool. </p>
              <a href="http://apress.com/book/view/1590599780" rel="nofollow"><img src="http://www.puppetlabs.com/images/book.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">411 NW Park Street</span>
           /
           <span class="locality">Portland</span>, 
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>          
      </div>
    </div>
    <script src="http://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script> 
    
  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>        
